<html>
<head>
	<title>QUIZ</title>

 <link rel="shortcut icon" href="favicon.ico">

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
 <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <script>

    //Atualizar -- AJAX


  var nivel = 1;
  var certa;

  var p;
  var a;
  var b;
  var c;
  var d;

  var quantosAcertos = 0;
  var quantosErros = 0;

 
  var escolhida;

    /*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

   window.onload = function pegarInfo() {

    var xmlhttp = new XMLHttpRequest();
    var url = "http://localhost:3000/perguntas";

    xmlhttp.onreadystatechange=function() {
        if (this.readyState == 4 && this.status == 200) {
            //quando os dados retornarem da requisição serão enviados para a função ExibeDados()
            ExibeDados(this.responseText);

        }
    }

        xmlhttp.open("GET", url, true);
   
    xmlhttp.send();
} 

function ExibeDados(response) {


  document.getElementById("tela").style.display = "block";/*
  document.getElementById("tela").style.left = document.getElementById().innerHTML.style.left + 'px;'; 
  document.getElementById("tela").style.top = document.getElementById().innerHTML.style.top + 'px;'; */

    var arr = JSON.parse(response);
    
    p = "<h1>";
    a = "<span>";
    b = "<span>";
    c = "<span>";
    d = "<span>";


    for(var i = 0; i < arr.length; i++) 
    {
      if(nivel == arr[i].codPergunta)
      {
        p += arr[i].enunciado;
        a += arr[i].alternativaA;  
        b += arr[i].alternativaB;
        c += arr[i].alternativaC;
        d += arr[i].alternativaD;
        certa = arr[i].correta;  
      }   
    }

    p += "</h1>";
    a += "</span>";
    b += "</span>";
    c += "</span>";
    d += "</span>";
    
    document.getElementById("pergunta").innerHTML = p;   
    document.getElementById("r_Primeira").innerHTML = a;
    document.getElementById("r_Segunda").innerHTML = b;
    document.getElementById("r_Terceira").innerHTML = c;
    document.getElementById("r_Quarta").innerHTML = d;
} 

/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

    function Verificar()
    {
      var opcoes = document.getElementsByName("res");

      for(x in opcoes){
          if((opcoes.options[opcoes[x].id] =="a" && 'a' == certa)||(opcoes.options[opcoes[x].id] =="b" && 'b'== certa)||(opcoes.options[opcoes[x].id] == "c" && 'c' == certa)||(opcoes.options[opcoes[x].id] == "d" && 'd' == certa)){
            alert("Acertou");
            quantosAcertos++;
            trocarCorBtn('acertou');
            break;
           }
          else
          {
           alert("errou");
           quantosErros++;
           trocarCorBtn('errou');
           break;
          }
      }



      if(nivel == 10)
        alert("Acertos: " + quantosAcertos +"\n" +  "Erros: " + quantosErros);
      else
        alert("Acertos: " + quantosAcertos +"\n" + "Erros: " + quantosErros);

    }

    function trocarCorBtn(se){
     if(nivel == 1){
       if(se == 'acertou')
         document.getElementById("btn1").style.background = "green";
       else
        document.getElementById("btn1").style.background = "red";
  
      }
    else
     if(nivel == 2){
       if(se == 'acertou')
         document.getElementById("btn2").style.background = "green";
       else
        document.getElementById("btn2").style.background = "red";
  
      }
    else
     if(nivel == 3){
       if(se == "acertou")
         document.getElementById("btn3").style.background = "green";
       else
        document.getElementById("btn3").style.background = "red";
  
      }
     else
      if(nivel == 4){
       if(se == "acertou")
         document.getElementById("btn4").style.background = "green";
       else
        document.getElementById("btn4").style.background = "red";
  
      }
    else
      if(nivel == 5){
       if(se == "acertou")
         document.getElementById("btn5").style.background = "green";
       else
        document.getElementById("btn5").style.background = "red";
      }
    else
     if(nivel == 6){
       if(se == "acertou")
         document.getElementById("btn6").style.background = "green";
       else
        document.getElementById("btn6").style.background = "red";
      }
    else
     if(nivel == 7){
       if(se == "acertou")
         document.getElementById("btn7").style.background = "green";
       else
        document.getElementById("btn7").style.background = "red";  
      }
     else
     if(nivel == 8){
       if(se == "acertou")
         document.getElementById("btn8").style.background = "green";
       else
        document.getElementById("btn8").style.background = "red";
      }
      else
     if(nivel == 9){
       if(se == "acertou")
         document.getElementById("btn9").style.background = "green";
       else
        document.getElementById("btn9").style.background = "red";
      }
      else
      if(nivel == 10){
       if(se == "acertou")
         document.getElementById("btn10").style.background = "green";
       else
        document.getElementById("btn10").style.background = "red";
      }
    }


	</script>
	</head>
<link href="quizCSS.css" rel="stylesheet" type="text/css">
<body id="body">
    

     <img id="terra" src="imagens/terraQuiz.png" width="200px" height="250px">
     <img id="gif" src="imagens/emoji.gif" width=85px height=50px>
     <img id="caminho" src="imagens/caminho1.png" width=85px height=50px>
     <section id="tela" 
     style="background-color: lightgreen;position: absolute; 
         left: 400px; 
         top: 20px; 
         width: 48%; 
         height: 500px; 
         border-radius: 20%; ">

          <form name = "form" method="post">
        
        
          <center>
        <h1 id="pergunta" 
         style=" text-align: center;
         font-size: 40px;
         color: red; "></h1>
         </center>
         <br><br>
        
        <input id="a" style="position: absolute; left: 50px; top: 230px;" type="radio" name="res" style="margin-left: 40px;">  <span id="r_Primeira" style="color:blue;font-weight:bold;font-size: 38px;
          position: absolute; left: 80px; top: 220px;">
         </span>
         <br>
         <input id="b" type="radio" name="res" style="position: absolute; left: 50px; top: 280px;"><span id="r_Segunda" style="color:blue;font-weight:bold;font-size: 38px;
           position: absolute; left: 80px; top: 270px;"></span>
         <br>     
         <input id="" ="c" type="radio" name="res" style="position: absolute; left: 50px; top: 330px;"><span id="r_Terceira" style="color:blue;font-weight:bold;font-size: 38px;
            position: absolute; left: 80px; top: 320px;"></span>
         <br>
         <input id="" ="d" type="radio" name="res" style="position: absolute; left: 50px; top: 380px;"><span id="r_Quarta" style="color:blue;font-weight:bold;font-size: 38px;
            position: absolute; left: 80px; top: 370px;"></span>
         <br>
        
         <button id="btnVer" onclick="Verificar()" style="position: absolute; left: 300px; top: 430px;">Verificar</button>

            </section>
            
             </form>
     
     <button id="btn1" style="background-color: #5858FA"></button>
     <button id="btn2" onclick="Jogar()"></button>
     <button id="btn3"></button>
     <button id="btn4"></button>
     <button id="btn5"></button>
     <button id="btn6"></button>
     <button id="btn7"></button>
     <button id="btn8"></button>
     <button id="btn9"></button>
     <button id="btn10"></button>

</body>

</html>